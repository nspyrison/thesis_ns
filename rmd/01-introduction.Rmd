---
chapter: 1
knit: "bookdown::render_book"
---

# Introduction {#ch-introduction}

<!-- Exploratory data analysis -->
Exploratory Data Analysis (EDA) is the process of the initial summarization and visualization of a dataset. This is a critical first step of checking for realistic values, finding improper data formats, and revealing insights [@tukey_exploratory_1977]. Early and frequent data visualization is key to the data analyst's workflow [@wickham_r_2017] illustrated in Figure \@ref(fig:ch1fig1).

(ref:ch1fig1-cap) Data analysis workflow [@wickham_r_2017]. This work focuses primarily on multivariate data visualization and its use to extend the interpretability of non-linear models.
```{r ch1fig1, echo=F, out.width='100%', fig.cap = "(ref:ch1fig1-cap)"}
nsSafeIncGraphic("./figures/ch1_fig1_data_analysis_workflow.PNG")
```

<!-- Dimensionality increases, making data viz hard -->
As modern datasets grow in complexity, the use of multivariate data becomes more ubiquitous. As the number of variables in the data increases, so too does the difficulty in conveying the information they contain. The number of observations in the data matters though overly dense points can be alleviated by decreasing opacity of points or changing the geometric display to an aggregated heatmap or 2D density contours.

<!-- Multivariate viz, data, shadow segue to linear proj. -->
This thesis hinges on the visualization of multivariate data, central to this iterated workflow. The titanic dataset [@noauthor_encyclopedia_nodate] is a common starting dataset for machine learning and contains nine variables. Later, we will be looking at FIFA data and Ames housing datasets [@leone_fifa_2020; @de_cock_ames_2011], each of which contains dozens of variables. We will be focusing on linear projections (embeddings) of these higher spaces to extend the visualization of data space. In the same way that 3D object casts a 2D shadow, these projections show profile orientation of a data space embedded in fewer dimensions.

<!-- Linear projections -->
Linear projections use a linear combination of variables to define a new component. These components contain signal from multiple variables at once. This is an important step to extending the the dimensionality of visualization as compared with orthogonal views --- looking at a full contribution from a single variable. A basis is a matrix containing orthogonal components, essentially reorienting the dimensions onto a space (of equal or few dimensions). Premultiplying the basis with the data results in the projection. Figure \@ref(fig:ch1fig2)

<!-- Talk about features, structure and sensitivity -->
There are many features that an analyst may be looking for or come across in an analysis. Shape, location, outliers, and visual irregularity are standard features contained in data. Such interesting features will rarely be held in all frames with linear projections. Which variables contribute to the structure of a feature is essential to know and communicate to others. Figure \@ref(fig:ch1fig2) shows two linear projections of penguin data. The color and shape of the data distinguish penguin species. The separation of these clusters is a notable feature to discuss. The left frame shows no discernment between the species while the right frame shows a significant separation of the species.

(ref:ch1fig2-cap) Palmer Penguin data [@gorman_ecological_2014; @horst_palmerpenguins_2020], three species of penguins were measured across four physical variables: bill length (`b_l`), bill depth (`b_d`), flipper length (`f_l`), and body mass (`b_m`). These are two projections of 4D variable space with biplot display of the basis orientation. The separation of the species clusters is the feature of interest. Some orientations of the data do not show identify cluster separation (left) while others do (right).
```{r ch1fig2, echo=F, out.width='100%', fig.cap = "(ref:ch1fig2-cap)"}
nsSafeIncGraphic("./figures/ch1_fig2_penguin_cl_sep.png")
```

<!-- PCA -->
One example of linear projections is that of Principal Component Analysis [PCA, @pearson_liii._1901], which creates a component space ordered by descending variation. It uses eigenvalue decomposition to identify the basis reorientation. These components are typically viewed as discrete orthogonal pairs, commonly approximated in fewer components. The basis of linear projections is frequently illustrated with a biplot [@gabriel_biplot_1971]. The biplot expresses the magnitude and angle each variable contributes to the resulting display dimensions.

<!-- Tours, animated linear projections -->
The reduction of spaces can be minimized with dynamic visuals, such as the  _tour_ [@cook_grand_2008; @lee_state_2021] is a class of linear projections that animate small changes to the projection basis. A key feature of the tour is the permanence and tractability of the points through many frames. In the shadow analogy, an object such as a barstool will cast a circular shadow if the light is directly above the seat. However, such a shadow does not give the observer sufficient information as it could arise from any number of shapes such as a sphere, cylinder, or circular profiles. However, if the stool was rotated, its legs would show in the shadow quickly giving an intuitive interpretation of the object. Similarly, looking at a data object over the rotation of its variables yields information about its structure. The permanence of observations between frames, and other interaction such as linked brushing, should plausibly convey more information than static orthogonal views. Figure \@ref(fig:ch1fig3) shows six frames of a grand tour. With enough intermediate frames, points can be traced from one frame to another (permanence of observations). The grand tour will be discussed in more detail in Chapter \@ref(ch-background).

(ref:ch1fig3-cap) Frames of a grand tour of Palmer Penguin data. Tours animate linear projections over small changes in the basis. The observation permanence between frames is an essential distinction in tours. Target frames are selected randomly in the grand tour. An animation can be viewed at [vimeo.com/670936513](https://vimeo.com/670936513).
```{r ch1fig3, echo=F, out.width='100%', fig.cap = "(ref:ch1fig3-cap)"}
nsSafeIncGraphic("./figures/ch1_fig3_penguin_grandtour.png")
```

<!-- Manual tour -->
Component spaces identify specific features, and the grand tour selects target bases randomly. None of the previous methods allow an analyst to influence the contributions of variables to the basis. This is a crucial component for _human-in-the-loop_ analysis [@karwowski_international_2006]. If the analyst wants to explore what would happen to the structure when one variable was removed or the contribution of another was increased, they had no way to do so. @cook_manual_1997 introduce the _manual tour_, offering user control over the basis. By selecting a variable and initializing an additional manipulation dimension to an embedding, the contribution of the variable can be controlled. The manual tour can control the angle and magnitude that the variable contributes. However, the latter is generally more meaningful angular manipulations are effectively rotating the projection which changes the relative position but the not fundamentally what information is shown. Because of this distinction, this work mainly focuses on a specific manual tour, the _radial tour_, where the angle of the manipulated variable is fixed, and its magnitude is varied, changing only the radius. Figure \@ref(fig:ch1fig4) performs a radial tour on the bill length. The radius was changed while the angle of contribution was held constant. In frames 1 and 2. There is a large contribution from bill length, and all species are separable. Yet in frame 3, bill length is removed, and the separation between orange and green clusters has collapsed; we say the variable bill length is sensitive to the separation of these two clusters.

(ref:ch1fig4-cap) Frames of a radial, manual tour of Palmer Penguin data manipulating the contribution of bill length (`b_l`). When bill length has a considerable contribution to the frame, the clusters of orange and green species are separated (frames 1 and 2). When its contribution is removed, the clusters overlap (frame 3). Because of this, we say that bill length is sensitive to the separation of these two species. Animated version can viewed at [vimeo.com/670936513](https://vimeo.com/670936513).
```{r ch1fig4, echo=F, out.width='100%', fig.cap = "(ref:ch1fig4-cap)"}
nsSafeIncGraphic("./figures/ch1_fig4_penguin_manualtour.png")
```


## Research questions
<!-- Hypothesis statement -->

The over-arching question of interest can be stated as:

**Can the radial tour, with user control of the basis, help analysts understand linear projections, and explore the variable sensitivity of structure in the projection?**\
Understanding variable sensitivity to the structure in a projection frame is a crucial factor analysis; it highlights the variable attribution causing the structure. If an identified feature is the object of analysis, then the variable attribution is the location, orientation vantage point, for that feature. The user interaction afforded by the radial tour should allow for a more precise exploration of this structure by testing the variable sensitivity to that structure.

We have the theoretical work for the manual tour. However, we lack a publicly available implementation, implementation notes, and have no evaluation of its performance over alternatives.

RQ 1. **How do we define user interaction for the radial tours to add and remove variables smoothly from a 2D linear projection of data?**\
Neither component spaces nor the grand tour provides a means for changing a desired variable's contributions. To facilitate variable interaction, we need to have a means of manipulating the basis. This is crucial to explore the sensitivity of the variable contributions to the structure in a frame.

<!-- Most perceptible way to visualize multivariate spaces -->
PCA is a standard but static method to approximate multivariate spaces. The grand tour introduced viewing spaces animated over small changes to the basis. The manual tour gives an analyst the means to steer the basis to test the sensitivity of variables. However, it remains unclear which methods lead to the most perceptible way to visualize multivariate spaces.

RQ 2. **Does the use of the interactive radial tour improve analysts understanding of the relationship between variables and structure in 2D linear projections?**\
How can we be sure that having a means of control leads to a more human perceptible visualization? Comparing alternative methods should lend insight into which methods perform well under specific tasks.

<!-- Interpretability crisis of the non-linear models -->
Complex non-linear models are also being applied more frequently to predict or classify from many predictors. While these models lead to increased accuracy over linear models, they suffer from a loss of the interpretability of their variables. One aspect of eXplainable Artificial Intelligence (XAI) tries to preserve the interpretability of such models through local explanations. These explanations are essentially linear variable importance in the vicinity of one observation in a model. That is, the extent that variables help the model explain the difference between the intercept and this observations prediction. The user control from the radial tour may allow an analyst to understand better or even explore the support of these local explanations.

RQ 3. **Can the radial tours be used in conjunction with local explanations to improve the interpretability of black-box models?**\


## Methodology

The research corresponding with RQ 1 entails _algorithm & software design_ [@kleinberg_algorithm_2006] adapting the algorithm from @cook_manual_1997. I also want to clarify how to arrive at the rotation matrix. Doing so clarify the process to increase the embedded dimensionality. This allows for interactive control of 2D projections and serves as a foundation for the remaining work.

To address RQ 2, a controlled _experimental design_ [@winer_statistical_1962] has explored the efficacy of interactive radial tours as compared with two benchmark methods: PCA and the grand tour [@asimov_grand_1985]. PCA allows for the selection of discrete pairs, the grand tour has continuous animation without influence to the path, and the radial tour has continuous intermediate frames with user control.

The research for RQ 3 involves _design science_ [@hevner_design_2004]. A local explanation approximates the linear variable importance in the vicinity of one observation. Our design must accommodate two aspects for this novel analysis. First, it should visually facilitate the selection of observations to explore. Secondly, the design of visualization to further examine the variable sensitivity to the structure identified in local explanations.


## Contributions

The contributions resulting from the research to address these research questions can be split into software and knowledge contributions: 


### Scientific contributions

- Manual tour theory
    - Use of the Rodrigues' rotation formula to derive the rotation matrix; this was absent from the original paper and points to the means to extend the manual tour in a 3D embedding
    - Use cases for the manual tour giving plausible support to its application
- A user study, the first empirical evaluation of the radial tour, comparing its efficacy against the alternatives of PCA the grand tour including:
    - Creation of supervised classification task to assess the variable attribution to the separation of clusters performed under various levels of experimental factors: location, shape, and dimensionality
    - Definition of an accuracy measure to evaluate this task
    - Results: strong evidence that the radial tour increases the accuracy of this task by a sizable amount while the task is performed fastest with the grand tour
    - Attribution of the error by performing a mixed model regression helps to explain the source of the error term into the variability of participants skill aptitude for this task and variability of the difficulty of a simulation by random chance
    - Introduces an interactive application to preprocess data and explore. Users can choose from six supplied datasets or upload their own
- Cheem analysis, a novel method exploring the variable sensitivity of local explanations of non-linear models
    - Using a global view with the approximation of variable space, attribution space, and model information side-by-side with linked brushing identify a primary observation of interest and optional comparison observation
    - Normalize the variable attribution from the selected observation and use this as a projection basis
    - Explore and evaluate the local explanation; by use of the radial tour, we can explore the sensitivity to the structure identified by checking the support the explanation holds realistic or completely unreliable


### Software

- __spinifex__, an __R__ package offering a consistent framework for performing radial tours and the rendering of any tours to various formats:
    - Perform radial tours to explore the variable sensitivity to structure
    - Transform of numeric variable in the data
    - Extract various bases exposing features of the data
    - Interoperable with tours generated with __tour__ [@wickham_tourr:_2011]
    - Layered interface for producing tours that mirror the layered approach of __ggplot2__ [@wickham_ggplot2_2016]
    - Interactive application and vignettes help users get up to speed
- __cheem__, an __R__ package that facilitates the exploration of local explanations of non-linear models:
    - Preprocessing; creation of a random forest model, the extraction of all observation's tree SHAP local explanation, and extraction of other statistics for display
    - Visualization of approximations of the data- and attribution-space side-by-side with linked brushing, hover tooltips, and tabular display of selected points
    - Use of the radial tour explores the support of the variable contribution in agreement with the explanation
    - Also includes interactive application and a vignette to help users get up to speed


## Thesis structure

The remainder of the thesis is organized as follows: Chapter \@ref(ch-background) covers various visualizing techniques before introducing related studies and then non-linear models and their interpretability issues. Chapter \@ref(ch-spinifex) discusses the theory and implementation of the manual tour in the package __spinifex__. Chapter \@ref(ch-userstudy) discusses a user study evaluating the radial, manual tour's efficacy compared with PCA and the grand tour. There is ample evidence that using the radial tour increases the accuracy of responses for the supervised variable-attribution task describing the separation between two variables. Chapter \@ref(ch-cheem) extends the use of manual tours to improve the interpretability of non-linear models, where manual tours explore variable sensitivity to the structure identified in local explanations of the model. Lastly, Chapter \@ref(ch-conclusion) concludes with some takeaways and a discussion of possible extensions.
