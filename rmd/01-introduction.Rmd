---
chapter: 1
knit: "bookdown::render_book"
---

# Introduction {#ch-introduction}

<!-- Exploratory data analysis -->
Exploratory Data Analysis (EDA) is the process of the initial summarization and visualization of a dataset. This is a critical first step of checking for realistic values, finding improper data formats, and revealing insights [@tukey_exploratory_1977]. Early and frequent data visualization is key to the data analyst's workflow [@wickham_r_2017] illustrated in Figure \@ref(ch1fig1).

(ref:ch1fig1-cap) Data analysis workflow [@wickham_r_2017]. This work focuses primarily on multivariate data visualization, and also facilitates transforming data and interpretation of models.
```{r ch1fig1, echo=F, out.width='100%', fig.cap = "(ref:ch1fig1-cap)"}
nsSafeIncGraphic("./figures/ch1_fig1_data_analysis_workflow.PNG")
```

<!-- Dimensionality increases, making data viz hard -->
As modern datasets grow in complexity, the use of multivariate data becomes more ubiquitous. As the number of variables in the data increases, so too does the difficulty in conveying the information they contain. The number of observations in the data matters though overly dense points can alleviated by decreasing opacity of points or changing the geometric display to an aggregated heatmap or 2D density contours. This thesis hings on the visualization of multivariate data, central to this iterated workflow. The titanic dataset is a common starting dataset for machine leaning and contains nine variables. Sports and house sale datasets are also common and contain dozens of variables. It is important to extend the use of data visualization even with the added complexity of many variables.

<!-- Linear projections -->
Linear projections use a linear combinations of variables to define a new component. The components can contain signal from multiple variables at once, make a good step at extending the visuals as dimensionality increases. These component linear combinations  can be thought of an a reorientation of the origin basis. One example of linear projections is that of Principal Component Analysis [PCA, @pearson_liii._1901] which creates a component space ordered by descending amount of variation. It uses eigenvalue decomposition to identify the basis reorientation. These components are typically viewed as discrete orthogonal pairs, commonly approximated in fewer components. The basis of linear projections is common illustrated with a biplot [@gabriel_biplot_1971]. The biplot expresses the magnitude and angle each variable contributes to the resulting display dimensions.

(ref:ch1fig2-cap) Palmer Penguin data [@gorman_ecological_2014; @horst_palmerpenguins_2020], three species of penguins measured across four physical variables. These are two projections of 4D variable space. The basis orientation, is illustrated with a biplot. Separation of the species clusters is the structure of interest. Some orientations of the data do not show identify cluster separation while others will.
```{r ch1fig2, echo=F, out.width='100%', fig.cap = "(ref:ch1fig2-cap)"}
nsSafeIncGraphic("./figures/ch1_fig2_penguin_cl_sep.png")
```

<!-- Tours, animated linear projections -->
The reduction of spaces can be minimized with dynamic visuals, such as the  _tour_ [@cook_grand_2008; @lee_state_2021] is a class of linear projections that animate small changes to the projection basis. Intuitively, they show a projection of the data object down to lower-dimensional space in the same way that a 3D object casts a 2D shadow. A key feature of the tour is the permanence and tractability of the points through many frames. In the shadow analogy, an object such as a barstool will cast a circular shadow if the light is directly above the seat. However, such a shadow does not give the observer sufficient information as it could arise from any number of shapes such as a sphere, cylinder or circular profiles. However, if the stool was rotated, its legs would show in the shadow quickly giving an intuitive interpretation of the object. Similarly, looking at a data object over the rotation of its variables yields information about its structure. The permanence of observations between frames, and additional interaction such as linked brushing, should plausibly convey more information than static orthogonal views. Chapter \@ref(ch-background) walks through some of the previous alternatives, and why we ultimately continue with this class of animated linear dimension reduction.

(ref:ch1fig3-cap) Frames of a grand tour of Palmer Penguin data. Tours animates linear projections over small changes in the basis. In a grand tour target frames are selected randomly. 
```{r ch1fig3, echo=F, out.width='100%', fig.cap = "(ref:ch1fig3-cap)"}
nsSafeIncGraphic("./figures/ch1_fig3_penguin_grandtour.png")
```

<!-- Manual tour -->
Component spaces identify specific features and the grand tour selects target bases   randomly. None of the previous methods allow an analyst to influence the contributions of variables to the basis. This is a crucial component for _human-in-the-loop_ analysis [@karwowski_international_2006]. If the analyst wants to explore what would happen to the structure when one variable were removed or the contribution of another was increased, they had no way to do so. @cook_manual_1997 introduces the _manual tour_ offering means for user control over a basis. By selecting a variable and initializing an additional manipulation dimension to an embedding, the contribution of the variable can be controlled. The manual tour can control the angle and magnitude that the variable contributes though the latter is generally more meaningful angular manipulations are effectively rotating the projection which changes the relative position but the not fundamentally what information is shown. Because of this distinction this work mostly focuses on the a specific manual tour, the _radial tour_ where the angle of the manipulation variable is fixed and the magnitude is varies the radius in the original direction.

(ref:ch1fig4-cap) Frames of a radial, manual tour of Palmer Penguin data manipulating the contribution of bill length (`b_l`). When bill length has a large contribution to the frame the orange and green species clusters are separated. When its contribution is small the clusters overlap. Because of this we say that bill length is sensitive to the separation of these two variables.
```{r ch1fig4, echo=F, out.width='100%', fig.cap = "(ref:ch1fig4-cap)"}
nsSafeIncGraphic("./figures/ch1_fig4_penguin_manualtour.png")
```

<!-- Talk about features, structure and sensitivity -->
There are many things features that an analyst may be looking for or come across in the course of an analysis. This thesis will regularly be looking for linear components that identify spindles or separation of clusters. Both of these distinguish some subset of observations from the rest. More generally the type of data and hypothesis will likely influence the exact feature of interest. Which variables contribute to the structure of a feature is important to know and communicate to others. The manual tour can vary the contribution of a variable. If removing the contribution of a variable results in the feature no longer being resolved we say that the variable is sensitive to the structure of the feature identified.


## Research questions
<!-- Hypothesis statement -->

The over-arching question of interest can be stated as:

**Can the radial tour with user interaction help analysts understand linear projections, and explore the sensitivity of structure in the projection to the variables contributing to a projection?**\
Understanding variable sensitivity to the structure in a projection frame is a crucial factor analysis after identifying a feature of interest. If an identified feature is the object of an analysis, then the variable attribution it the location orientation vantage point for that feature. The user interaction afforded by the radial tour should allow for a more precise exploration of this structure by testing variable sensitivity to that structure.


We have the theoretical work for the manual tour. However, we lack a publicly available implementation, implementation notes, and have no evaluation of its performance over alternatives.

RQ 1. **How do we define user interaction for the radial tours to add and remove variables smoothly from a 2D linear projection of data?**\
Neither component spaces nor the grand tour provide a means for changing a desired variable's contributions. To facilitate variable interaction, we need to have a means of manipulating the basis. This is crucial to explore the sensitivity of the variable contributions to the structure in a frame.
<!---@cook_manual_1997 described an algorithm for manually controlling a tour, to rotate a variable into and out of a 2D projection. This algorithm provides the start to user-controlled radial tours. The work [@spyrison_spinifex_2020] was adapted so that the user has more control of the interpolation. The user can set the full range of the contribution from $[-1, 1]$, and output to a device that allows the user to reproduce motions and animate or rock the rotation backward and forwards. These fine-tuned controls provide a better tool for sensitivity analysis. --->


<!-- Most perceptable way to visualize multivarite spaces -->
PCA is a common but static method to approximate multivariate spaces. The grand tour introduced the idea of viewing spaces animated over small changes to the basis. The manual tour gives an analyst the means to steer the basis to test the sensitivity of variables. However, it remains unclear which methods lead to the most perceptible way to visualize multivariate spaces.

RQ 2. **Does the use of the interactive radial tour improve analysts understanding of the relationship between variables and structure in 2D linear projections?**\
How can we be sure that having a means of control leads to a more human perceptible visualization? Comparing alternative methods should lend insight into which methods perform well under specific tasks.
<!-- We performed an $N=108$, within-participant user study comparing accuracy and time with the primary factor as the type of data visualization. Each participant performed 2 evaluations with either Principal Component Analysis (PCA, which is user control, but discrete), grand tour (continuous interpolated frames, but lack user control), or radial tour (user control and continuous animation). We find strong evidence that the radial tour increases accuracy. We also show the effects from the other experimental factors of location, shape data dimensionality, and the random effects from the data and that of the participants. -->


<!-- Interpretability crisis of the non-linear models -->
Complex non-linear models are also being applied with more frequency to predict or classify with many predictors. While these models lead to increased accuracy over linear models, they suffer from a loss of the interpretability of their variables. One aspect of eXplainable Artificial Intelligence (XAI) tries to preserve the interpretability of such models through the use of local explanations. These explanations are essentially linear variable importance in the vicinity of one observation in a model. That is, which variables help the model explain the difference between the intercept and this observations prediction. The user control from the radial tour may allow an analyst to better understand or even explore the support of these local explanation.

RQ 3. **Can the radial tours be used in conjunction with local explanations to improve the interpretability of black-box models?**\
The tension from the trade-off between accuracy and interpretability of black-box models is rising. There is a clear need to be able to explain black-box models. After extrapolating local explanations of all observations, we want to scrutinize the explanation of one observation by changing the variable-contribution with the radial tour.


## Methodology

The research corresponding with RQ 1 entails _algorithm/software design_ adapting the algorithm from @cook_manual_1997. This allows for interactive control of 2D projections and serves as a foundation for the remaining work. I create a consistent code base to facilitates manual tours and layered composition interoperable with other tours.

To address RQ 2, a controlled _experimental study_ has explored the efficacy of interactive radial tours as compared with two benchmark methods: PCA and the grand tour [@asimov_grand_1985]. PCA allows for selection of discrete pairs, the grand tour has continuous animation without influence to the path, while the radial tour has continuous intermediate frames and user control.
<!--<<KM strikthrough, Jan 20>> This was a within-participant user study where each participant experienced each visual. Trials were balanced across three other experimental factors: the location of the signal, the shape of the cluster distributions, and the dimensionality of the data. Ethics approval was obtained for this work. The approval and disclosure forms are available at the project repository: https://github.com/nspyrison/spinifex_study/tree/master/ethics. -->

The research for RQ #3 involves _design science_. A local explanation is an approximation of the linear variable importance in the vicinity of one observation. Our design must accommodate the selection of observations to explore and the then performing radial tours on the 

This SHAP value will also serve as the 1D basis for the radial tour. While using SHAP as a projection basis is novel, it is not particularly insightful, we use the radial tour to change variable contributions. We also provide linkage information, the within-class distributions of the SHAP components as parallel coordinate marks on the basis. We also offer a global view and related statistics to map to color to aid in exploring the sensitivity of the SHAP-space relative to the sensitivity of the original data space.


## Contributions

The contributions resulting from the research to address these research questions can be split into software and knowledge contributions: 


### Knowledge

- Manual tour theory
    - Use of the Rodrigues' rotation formula to derive the rotation matrix; this was absent from the original paper and points to the means to extend the manual tour in a 3D embedding
    - Use cases for the manual tour giving plausible support to its application
- A user study comparing the efficacy of the radial tour against the alternatives of PCA the grand tour includes:
    - Creation of supervised classification task to assess the variable attribution to the separation of clusters performed under various levels of experimental factors: location, shape, and dimensionality
    - Definition of an accuracy measure to evaluate this task
    - Results: strong evidence that the radial tour increases the accuracy of this task by a sizable amount while the task is performed fastest with the grand tour
    - Attribution of the error by performing a mixed model regression helps to explain the source of the error term into the variability of participants skill aptitude for this task and variability of the difficultly of a simulation by random chance
    - Introduces an interactive application to preprocess data and explore. Users can choose from six supplied datasets or upload their own
- Cheem analysis, given a non-linear model and local explanations of all observations I purpose the exploring the support of local explanation by varying the contributions with the radial, manual tour.
    - Using a global view with approximation of variable space, attribution space, and model information side-by-side with linked brushing identify a primary observation of interest and optional comparison observation
    - Normalize the variable attribution from the selected observation and use this as a projection basis
    - Explore and evaluate the local explanation; by use of the radial tour we can explore the sensitivity to the structure identified checking the support the explanation holds realistic or completely unreliable


### Software

- __spinifex__, an __R__ package offering a consistent framework for performing radial tours and the rendering of any tours to various formats:
    - Perform radial tours to explore the variable sensitivity to structure
    - Transform of numeric variable in the data
    - Extract various bases exposing features of the data
    - Interoperable with tours generated with __tour__ [@wickham_tourr:_2011]
    - Layered interface for producing tours that mirror the layered approach of __ggplot2__ [@wickham_ggplot2_2016]
    - Interactive application and vignette help users get up to speed
- __cheem__, an __R__ package that facilitates the exploration of local explanations of non-linear models:
    - Preprocessing; creation of a random forest model, the extraction of all observation's tree SHAP local explanation, and extraction of other statistics for display
    - Visualization of approximations of the data- and attribution-space side-by-side with linked brushing, hover tooltips, and tabular display of selected points
    - Use of the radial tour explores the support of the variable contribution in agreement with the explanation
    - Interactive application and vignette help users get up to speed


## Thesis structure

The remainder of the thesis is organized as follows: Chapter \@ref(ch-background) covers various visualizing techniques before introducing related studies and then non-linear models and their interpretability issues. Chapter \@ref(ch-spinifex) discusses the theory and implementation of the manual tour in the package __spinifex__. Chapter \@ref(ch-userstudy) discusses a user study evaluating the radial, manual tour's efficacy compared with PCA and the grand tour. There is ample evidence that using the radial tour increases the accuracy of responses for the supervised variable-attribution task describing the separation between two variables. Chapter \@ref(ch-cheem) extends the use of manual tours to improve the interpretability of non-linear models, where manual tours explore variable sensitivity to the structure identified in local explanations of the model. Lastly, Chapter \@ref(ch-conclusion) concludes with some takeaways and a discussion of possible extensions.
