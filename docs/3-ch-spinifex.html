<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 A User-Controlled Manual Tour for Animated Linear Projections | Interactive and dynamic visualization of high-dimensional data</title>
  <meta name="description" content="Chapter 3 A User-Controlled Manual Tour for Animated Linear Projections | Interactive and dynamic visualization of high-dimensional data" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 A User-Controlled Manual Tour for Animated Linear Projections | Interactive and dynamic visualization of high-dimensional data" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 A User-Controlled Manual Tour for Animated Linear Projections | Interactive and dynamic visualization of high-dimensional data" />
  
  
  

<meta name="author" content="Nicholas S Spyrison" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="2-ch-background.html"/>
<link rel="next" href="4-ch-userstudy.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="template/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./"> </a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="abstract.html"><a href="abstract.html"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html"><i class="fa fa-check"></i>Acknowledgments</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#license"><i class="fa fa-check"></i>License</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="1-ch-introduction.html"><a href="1-ch-introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="1-ch-introduction.html"><a href="1-ch-introduction.html#research-questions"><i class="fa fa-check"></i><b>1.1</b> Research questions</a></li>
<li class="chapter" data-level="1.2" data-path="1-ch-introduction.html"><a href="1-ch-introduction.html#methodology"><i class="fa fa-check"></i><b>1.2</b> Methodology</a></li>
<li class="chapter" data-level="1.3" data-path="1-ch-introduction.html"><a href="1-ch-introduction.html#contributions"><i class="fa fa-check"></i><b>1.3</b> Contributions</a></li>
<li class="chapter" data-level="1.4" data-path="1-ch-introduction.html"><a href="1-ch-introduction.html#thesis-structure"><i class="fa fa-check"></i><b>1.4</b> Thesis structure</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-ch-background.html"><a href="2-ch-background.html"><i class="fa fa-check"></i><b>2</b> Background</a>
<ul>
<li class="chapter" data-level="2.1" data-path="2-ch-background.html"><a href="2-ch-background.html#motivation"><i class="fa fa-check"></i><b>2.1</b> Motivation</a></li>
<li class="chapter" data-level="2.2" data-path="2-ch-background.html"><a href="2-ch-background.html#multivariate-visualization"><i class="fa fa-check"></i><b>2.2</b> Multivariate visualization</a></li>
<li class="chapter" data-level="2.3" data-path="2-ch-background.html"><a href="2-ch-background.html#linear-projections"><i class="fa fa-check"></i><b>2.3</b> Linear projections</a></li>
<li class="chapter" data-level="2.4" data-path="2-ch-background.html"><a href="2-ch-background.html#evaluating-multivariate-data-visualization"><i class="fa fa-check"></i><b>2.4</b> Evaluating multivariate data visualization</a></li>
<li class="chapter" data-level="2.5" data-path="2-ch-background.html"><a href="2-ch-background.html#nonlinear-models"><i class="fa fa-check"></i><b>2.5</b> Nonlinear models</a></li>
<li class="chapter" data-level="2.6" data-path="2-ch-background.html"><a href="2-ch-background.html#sec:explanations"><i class="fa fa-check"></i><b>2.6</b> Local explanations</a></li>
<li class="chapter" data-level="2.7" data-path="2-ch-background.html"><a href="2-ch-background.html#conclusion"><i class="fa fa-check"></i><b>2.7</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-ch-spinifex.html"><a href="3-ch-spinifex.html"><i class="fa fa-check"></i><b>3</b> A User-Controlled Manual Tour for Animated Linear Projections</a>
<ul>
<li class="chapter" data-level="3.1" data-path="3-ch-spinifex.html"><a href="3-ch-spinifex.html#sec:algorithm"><i class="fa fa-check"></i><b>3.1</b> Algorithm</a></li>
<li class="chapter" data-level="3.2" data-path="3-ch-spinifex.html"><a href="3-ch-spinifex.html#sec:oblique"><i class="fa fa-check"></i><b>3.2</b> Oblique cursor movement</a></li>
<li class="chapter" data-level="3.3" data-path="3-ch-spinifex.html"><a href="3-ch-spinifex.html#sec:pkgstructure"><i class="fa fa-check"></i><b>3.3</b> Package structure</a></li>
<li class="chapter" data-level="3.4" data-path="3-ch-spinifex.html"><a href="3-ch-spinifex.html#sec:usecases"><i class="fa fa-check"></i><b>3.4</b> Use cases</a></li>
<li class="chapter" data-level="3.5" data-path="3-ch-spinifex.html"><a href="3-ch-spinifex.html#sec:discussion"><i class="fa fa-check"></i><b>3.5</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-ch-userstudy.html"><a href="4-ch-userstudy.html"><i class="fa fa-check"></i><b>4</b> A Study on the Benefit of a User-Controlled Radial Tour for Variable Attribution of Structure</a>
<ul>
<li class="chapter" data-level="4.1" data-path="4-ch-userstudy.html"><a href="4-ch-userstudy.html#sec:userstudy"><i class="fa fa-check"></i><b>4.1</b> User study</a></li>
<li class="chapter" data-level="4.2" data-path="4-ch-userstudy.html"><a href="4-ch-userstudy.html#sec:results"><i class="fa fa-check"></i><b>4.2</b> Results</a></li>
<li class="chapter" data-level="4.3" data-path="4-ch-userstudy.html"><a href="4-ch-userstudy.html#sec:conclusion"><i class="fa fa-check"></i><b>4.3</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-ch-cheem.html"><a href="5-ch-cheem.html"><i class="fa fa-check"></i><b>5</b> Exploring Local Explanations of Nonlinear Models Using the Radial tour</a>
<ul>
<li class="chapter" data-level="5.1" data-path="5-ch-cheem.html"><a href="5-ch-cheem.html#sec:shap"><i class="fa fa-check"></i><b>5.1</b> SHAP and tree SHAP local explanations</a></li>
<li class="chapter" data-level="5.2" data-path="5-ch-cheem.html"><a href="5-ch-cheem.html#sec:cheemviewer"><i class="fa fa-check"></i><b>5.2</b> The cheem viewer</a></li>
<li class="chapter" data-level="5.3" data-path="5-ch-cheem.html"><a href="5-ch-cheem.html#sec:casestudies"><i class="fa fa-check"></i><b>5.3</b> Case studies</a></li>
<li class="chapter" data-level="5.4" data-path="5-ch-cheem.html"><a href="5-ch-cheem.html#sec:cheemdiscussion"><i class="fa fa-check"></i><b>5.4</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-ch-conclusion.html"><a href="6-ch-conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion</a>
<ul>
<li class="chapter" data-level="6.1" data-path="6-ch-conclusion.html"><a href="6-ch-conclusion.html#contributions-1"><i class="fa fa-check"></i><b>6.1</b> Contributions</a></li>
<li class="chapter" data-level="6.2" data-path="6-ch-conclusion.html"><a href="6-ch-conclusion.html#limitations"><i class="fa fa-check"></i><b>6.2</b> Limitations</a></li>
<li class="chapter" data-level="6.3" data-path="6-ch-conclusion.html"><a href="6-ch-conclusion.html#future-work"><i class="fa fa-check"></i><b>6.3</b> Future work</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="bibliography.html"><a href="bibliography.html"><i class="fa fa-check"></i>Bibliography</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="A-sec-glossary.html"><a href="A-sec-glossary.html"><i class="fa fa-check"></i><b>A</b> Glossary</a></li>
<li class="chapter" data-level="B" data-path="B-supplementary-material.html"><a href="B-supplementary-material.html"><i class="fa fa-check"></i><b>B</b> Supplementary material</a>
<ul>
<li class="chapter" data-level="B.1" data-path="B-supplementary-material.html"><a href="B-supplementary-material.html#thesis"><i class="fa fa-check"></i><b>B.1</b> Thesis</a></li>
<li class="chapter" data-level="B.2" data-path="B-supplementary-material.html"><a href="B-supplementary-material.html#chapter-3-spinifex-links"><i class="fa fa-check"></i><b>B.2</b> Chapter 3, spinifex links</a></li>
<li class="chapter" data-level="B.3" data-path="B-supplementary-material.html"><a href="B-supplementary-material.html#sec:extanalysis"><i class="fa fa-check"></i><b>B.3</b> Chapter 4, user study extended analysis</a></li>
<li class="chapter" data-level="B.4" data-path="B-supplementary-material.html"><a href="B-supplementary-material.html#chapter-5-cheem-links"><i class="fa fa-check"></i><b>B.4</b> Chapter 5, cheem links</a></li>
</ul></li>
<li class="divider"></li>
<li><strong><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></strong></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Interactive and dynamic visualization of high-dimensional data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ch-spinifex" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> A User-Controlled Manual Tour for Animated Linear Projections</h1>
<!-- Abstract -->
<p>Dynamic low-dimensional linear projections of multivariate data known as <em>tours</em> were introduced in chapter 2. They are an important tool for extending the visualization of multivariate data. The <strong>R</strong> package <strong>tourr</strong> facilitates several types of tours: grand, guided, little, local, and frozen. Each of these can be viewed in a development environment, or their basis path can be saved for later consumption. This chapter describes a new package, <strong>spinifex</strong>, which creates <em>manual tours</em> <span class="citation">(<a href="bibliography.html#ref-cook_grand_1995" role="doc-biblioref">Cook et al. 1995</a>)</span> of multivariate data. We apply <strong>spinifex</strong> to particle physics data to illustrate the structure’s sensitivity in a projection to specific variable contributions. Additionally, this package creates a ggproto API for composing any tour that mirrors the layered additive approach of <strong>ggplot2</strong>. Tours can then be animated and exported to various formats with <strong>plotly</strong> or <strong>gganimate</strong>.</p>
<!-- ## Introduction -->
<!-- Segue merged into abstract and outline -->
<!-- Chapter outline -->
<p>The chapter is organized as follows. Section <a href="3-ch-spinifex.html#sec:algorithm">3.1</a> provides an illustrated detailed description of a 2D manual tour and fills in the previously absent details to solve the 3D rotation matrix used in 2D manual tours. This proves a scaffolding for the extension to solving a 4D rotation matrix for a 3D manual tour. Section <a href="3-ch-spinifex.html#sec:oblique">3.2</a> includes compact algorithms for capturing oblique movements from a cursor. Section <a href="3-ch-spinifex.html#sec:pkgstructure">3.3</a> discusses the functions and code usage to perform radial tours and compose a layered display of tours. Section <a href="3-ch-spinifex.html#sec:usecases">3.4</a> illustrates a use case of the radial tour facilitating sensitivity analysis on high-energy physics experiments <span class="citation">(<a href="bibliography.html#ref-wang_mapping_2018" role="doc-biblioref">Wang et al. 2018</a>)</span>. Section <a href="3-ch-spinifex.html#sec:discussion">3.5</a> concluded with a discussion of this chapter.</p>
<!-- Algorithm outline -->
<div id="sec:algorithm" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Algorithm</h2>
<p>The types of manipulations of the manual tour can be thought of in several ways:</p>
<ul>
<li><em>radial</em>: fix the direction of contribution, and allow the magnitude to change.</li>
<li><em>angular</em>: fix the magnitude, and allow the angle direction of contribution to vary.</li>
<li><em>horizontal</em>, <em>vertical</em>: changing the contribution in horizontal or vertical directions.</li>
<li><em>oblique</em>: paths deviating from these movements, such as being captured from the movement of a cursor.</li>
</ul>
<p>Angular manipulations are homomorphic in that they show the same information while rotating the frame. More interesting is a change in the magnitude of the contribution, changing the radius along the original contribution angle. For this reason, we implement the radial tour as the default for the manual tour. Below we describe the manual tour illustrated in detail. After that, the algorithms for oblique cursor movements in 1- and 2D are covered.</p>
<div id="notation" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Notation</h3>
<p>The notation used to describe the algorithm for a 2D radial manual tour is as follows:</p>
<ul>
<li><span class="math inline">\(\textbf{X}\)</span>, the data, an <span class="math inline">\(n \times p\)</span> quantitative matrix to be projected.</li>
<li><span class="math inline">\(\textbf{A}\)</span>, any orthonormal projection basis, <span class="math inline">\(p \times d\)</span> matrix, describing the projection from <span class="math inline">\(\mathbb{R}^p \Rightarrow \mathbb{R}^d\)</span>.</li>
<li><span class="math inline">\(k\)</span>, is the index of the manipulation variable or manip var for short.</li>
<li><span class="math inline">\(\textbf{e}\)</span>, a 1D basis vector of length <span class="math inline">\(p\)</span>, with 1 in the <span class="math inline">\(k\)</span>-th position and 0 elsewhere.</li>
<li><span class="math inline">\(\textbf{R}\)</span>, the <span class="math inline">\(d+1\)</span>-D rotation matrix, performs unconstrained 3D rotations within the manip space, <span class="math inline">\(\textbf{M}\)</span>.</li>
<li><span class="math inline">\(\theta\)</span>, the angle of in-projection rotation, for example, on the reference axes; <span class="math inline">\(c_\theta, s_\theta\)</span> are its cosine and sine.</li>
<li><span class="math inline">\(\phi\)</span>, the angle of out-of-projection rotation, into the manip space; <span class="math inline">\(c_\phi, s_\phi\)</span> are its cosine and sine. The initial value for animation purposes is <span class="math inline">\(\phi_1\)</span>.</li>
<li><span class="math inline">\(\textbf{U}\)</span>, the axis of rotation for out-of-projection rotation orthogonal to <span class="math inline">\(\textbf{e}\)</span>.</li>
<li><span class="math inline">\(\textbf{Y} = \textbf{X} \times \textbf{A}\)</span>, the resulting data projection through the manip space, <span class="math inline">\(\textbf{M}\)</span>, and rotation matrix, <span class="math inline">\(\textbf{R}\)</span>.</li>
</ul>
<!-- operate on bases -->
<p>The algorithm operates entirely on projection bases and incorporates the data only when making the projected data plots in light of efficiency.</p>
</div>
<div id="steps" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Steps</h3>
<div id="step-0-setup" class="section level4" number="3.1.2.1">
<h4><span class="header-section-number">3.1.2.1</span> Step 0) Setup</h4>
<!-- describe data. -->
<p>The flea data (<span class="citation"><a href="bibliography.html#ref-lubischew_use_1962" role="doc-biblioref">Lubischew</a> (<a href="bibliography.html#ref-lubischew_use_1962" role="doc-biblioref">1962</a>)</span>), available in the <strong>tourr</strong> package <span class="citation">(<a href="bibliography.html#ref-wickham_tourr:_2011" role="doc-biblioref">Wickham et al. 2011</a>)</span>, is used to illustrate the algorithm. The data contains 74 observations of six variables, physical measurements of flea beetles. Each observation belongs to one of three species. Each variable is normalized to a common range of [0, 1].</p>
<!-- Projection basis -->
<p>An initial 2D projection basis must be provided. A suggested way to start is to identify an interesting projection using a projection pursuit guided tour. The holes index is used to find a 2D projection of the flea data, which shows three separated species groups. Figure <a href="3-ch-spinifex.html#fig:ch3fig1">3.1</a> shows the initial projection of the data. On the left, a biplot <span class="citation">(<a href="bibliography.html#ref-gabriel_biplot_1971" role="doc-biblioref">Gabriel 1971</a>)</span> illustrates the projection basis (<span class="math inline">\(\textbf{A}\)</span>), showing each variable’s magnitude and direction of contribution to the projection. The right side shows the projected data, <span class="math inline">\(\textbf{Y}_{[n,~2]} ~=~ \textbf{X}_{[n,~p]} \textbf{A}_{[p,~2]}\)</span>. The color and shape of points are mapped to the flea species.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ch3fig1"></span>
<img src="figures/ch3_fig1_biplot.png" alt="Biplot of the initial 2D projection of normalized flea data. The basis is depicted on the left, and the resulting data projection is on the right. The color and shape of data points are mapped to the flea beetle species. The basis was produced by a projection pursuit guided tour with the holes index. The contribution of the variables `aede2` and `tars1` approximately contrasts the other variables. The visible structure in the projection is the three species clusters." width="100%"  />
<p class="caption">
Figure 3.1: Biplot of the initial 2D projection of normalized flea data. The basis is depicted on the left, and the resulting data projection is on the right. The color and shape of data points are mapped to the flea beetle species. The basis was produced by a projection pursuit guided tour with the holes index. The contribution of the variables <code>aede2</code> and <code>tars1</code> approximately contrasts the other variables. The visible structure in the projection is the three species clusters.
</p>
</div>
</div>
<div id="step-1-choose-manip-variable" class="section level4" number="3.1.2.2">
<h4><span class="header-section-number">3.1.2.2</span> Step 1) Choose manip variable</h4>
<!-- select a manip var-->
<p>In figure <a href="3-ch-spinifex.html#fig:ch3fig1">3.1</a> the contribution of the variables <code>tars1</code> and <code>aede2</code> mostly contrast the contribution of the other four variables. These two variables combined contribute in the direction where the purple cluster is separated from the other two clusters. The variable <code>aede2</code> is selected as the manip var, whose contribution is changed. The aspect being explored is: how important is this variable to separating the clusters in this projection?</p>
</div>
<div id="step-2-create-the-3d-manip-space" class="section level4" number="3.1.2.3">
<h4><span class="header-section-number">3.1.2.3</span> Step 2) Create the 3D manip space</h4>
<!-- Zero Vect, manip sp -->
<p>Initialize a zero vector, <span class="math inline">\(\textbf{e}\)</span>, of length <span class="math inline">\(p\)</span>, and set the <span class="math inline">\(k\)</span>-th element to 1. In the example data, <code>aede2</code> is the fifth variable in the data, so <span class="math inline">\(k=5\)</span>, set <span class="math inline">\(e_5=1\)</span>. Append this vector to the current basis as the third column. Use a Gram-Schmidt process to orthonormalize the coordinate basis vector on the original 2D projection to describe a 3D manip space, <span class="math inline">\(\textbf{M}\)</span>.</p>
<p><span class="math display">\[\begin{align*}
  e_k &amp;\leftarrow 1 \\ 
  \textbf{e}^*_{[p,~1]} &amp;= \textbf{e} - \langle \textbf{e}, \textbf{A}_1 \rangle \textbf{A}_1 - \langle \textbf{e}, \textbf{A}_2 \rangle \textbf{A}_2 \\ 
  \textbf{M}_{[p,~3]} &amp;= (\textbf{A}_1,\textbf{A}_2,\textbf{e}^*)
\end{align*}\]</span></p>
<!-- What the manip space provides -->
<p>The manip space provides a 3D projection from <span class="math inline">\(p\)</span>-dimensional space, where the coefficient of the manip var can range completely between [0, 1]. This 3D space serves as the medium to rotate the projection basis relative to the selected manipulation variable. Figure <a href="3-ch-spinifex.html#fig:ch3fig2">3.2</a> illustrates this 3D manip space with the manip var highlighted. This representation is produced by calling the <code>view_manip_space()</code> function. This diagram is purely used to help explain the algorithm.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ch3fig2"></span>
<img src="figures/ch3_fig2_manip_sp.png" alt="Illustration of a 3D manip space, the projection plane is shown as a blue circle extending into and out of the display. A manipulation direction is initialized, the red circle, orthogonal to the projection plane. This allows the selected variable, `aede2`, to change its contribution to the projection plane. The other variables' contributions rotate into this space, preserving the orthogonal basis, but are omitted in the manipulation dimension for simplicity." width="100%"  />
<p class="caption">
Figure 3.2: Illustration of a 3D manip space, the projection plane is shown as a blue circle extending into and out of the display. A manipulation direction is initialized, the red circle, orthogonal to the projection plane. This allows the selected variable, <code>aede2</code>, to change its contribution to the projection plane. The other variables’ contributions rotate into this space, preserving the orthogonal basis, but are omitted in the manipulation dimension for simplicity.
</p>
</div>
</div>
<div id="step-3-defining-a-3d-rotation" class="section level4" number="3.1.2.4">
<h4><span class="header-section-number">3.1.2.4</span> Step 3) Defining a 3D rotation</h4>
<!-- illustration of axis manip -->
<p>The basis vector corresponding to the manip var (red line in Figure <a href="3-ch-spinifex.html#fig:ch3fig2">3.2</a>) can be operated like a lever anchored at the origin. This manual control process rotates the manip variable into and out of the 2D projection (Figure <a href="3-ch-spinifex.html#fig:ch3fig3">3.3</a>). As the variable contribution is controlled, the manip space turns, and the projection onto the horizontal plane correspondingly changes. This is a manual tour. Generating a sequence of values for the rotation angles produces a path for the rotation of the manip space.</p>
<!-- describe manip var path -->
<p>For a radial tour, fix <span class="math inline">\(\theta\)</span>, the angle describing rotation within the horizontal projection plane, and compute a sequence for <span class="math inline">\(\phi\)</span>, defining movement out of this plane. This will change <span class="math inline">\(\phi\)</span> from the initial value, <span class="math inline">\(\phi_1\)</span>, the angle between <span class="math inline">\(\textbf{e}\)</span> and its shadow in <span class="math inline">\(\textbf{A}\)</span>, to a maximum of <span class="math inline">\(0\)</span> (manip var entirely in projection), then to a minimum of <span class="math inline">\(\pi/2\)</span> (manip var orthogonal to the projection), before returning to <span class="math inline">\(\phi_1\)</span>.</p>
<!-- define the rotation matrix -->
<p>Rotations in 3D can be defined by the axes they pivot on. Rotation within the projection, <span class="math inline">\(\theta\)</span>, is rotation around the <span class="math inline">\(Z\)</span>-axis. Out-of-projection rotation, <span class="math inline">\(\phi\)</span>, is the rotation around an axis on the <span class="math inline">\(XY\)</span> plane, <span class="math inline">\(\textbf{U}\)</span>, orthogonal to <span class="math inline">\(\textbf{e}\)</span>. Given these axes, the rotation matrix, <span class="math inline">\(\textbf{R}\)</span>, can be written as follows, using Rodrigues’ rotation formula (originally published in <span class="citation"><a href="bibliography.html#ref-rodrigues_lois_1840" role="doc-biblioref">Rodrigues</a> (<a href="bibliography.html#ref-rodrigues_lois_1840" role="doc-biblioref">1840</a>)</span>):</p>
<p><span class="math display">\[\begin{align*}
    \textbf{R}_{[3,~3]} 
    &amp;= \textbf{I}_3 + s_\phi\*\textbf{U} + (1-c_\phi)\*\textbf{U}^2 \\
        &amp;=
    \begin{bmatrix}
      1 &amp; 0 &amp; 0 \\ 
      0 &amp; 1 &amp; 0 \\ 
      0 &amp; 0 &amp; 1 \\
    \end{bmatrix} +
    \begin{bmatrix}
      0 &amp; 0 &amp; c_\theta s_\phi \\
      0 &amp; 0 &amp; s_\theta s_\phi \\
      -c_\theta s_\phi &amp; -s_\theta s_\phi &amp; 0 \\
    \end{bmatrix} +
    \begin{bmatrix}
      -c_\theta (1-c_\phi) &amp; s^2_\theta (1-c_\phi) &amp; 0 \\
      -c_\theta s_\theta (1-c_\phi) &amp; -s^2_\theta (1-c_\phi) &amp; 0 \\
      0 &amp; 0 &amp; c_\phi-1 \\
    \end{bmatrix} \\
    &amp;= 
    \begin{bmatrix}
      c_\theta^2 c_\phi + s_\theta^2 &amp;
      -c_\theta s_\theta (1 - c_\phi) &amp;
      -c_\theta s_\phi \\
      -c_\theta s_\theta (1 - c_\phi) &amp;
      s_\theta^2 c_\phi + c_\theta^2 &amp;
      -s_\theta s_\phi \\
      c_\theta s_\phi &amp;
      s_\theta s_\phi &amp;
      c_\phi
    \end{bmatrix} \\
\end{align*}\]</span></p>
<p>where</p>
<p><span class="math display">\[\begin{align*}
  \textbf{U} &amp;= (u_x, u_y, u_z) =
  (s_\theta, -c_\theta, 0) \\ 
  &amp;=
  \begin{bmatrix}
  0 &amp; -u_z &amp; u_y \\
  u_z &amp; 0 &amp; -u_x \\
  -u_y &amp; u_x &amp; 0 \\
  \end{bmatrix} =
  \begin{bmatrix}
    0 &amp; 0 &amp; -c_\theta \\
    0 &amp; 0 &amp; -s_\theta \\
    c_\theta &amp; s_\theta &amp; 0 \\
  \end{bmatrix} \\
  \end{align*}\]</span></p>
<!-- The term $(1-c_\phi)$ is used by convention, but $2sin^2(\phi/2)$ is more computationally robust. -->
</div>
<div id="step-4-creating-an-animation-of-the-radial-rotation" class="section level4" number="3.1.2.5">
<h4><span class="header-section-number">3.1.2.5</span> Step 4) Creating an animation of the radial rotation</h4>
<!-- Phi transform and animation -->
<p>The steps outlined above can be used to create any arbitrary rotation in the manip space. To use this for sensitivity analysis, the radial rotation is built into an animation where the manip var is rotated fully into the projection, completely out, and then back to the initial value. This involves varying <span class="math inline">\(\phi\)</span> between <span class="math inline">\(0\)</span> and <span class="math inline">\(\pi/2\)</span>, call the steps <span class="math inline">\(\phi_i\)</span>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ch3fig3"></span>
<img src="figures/ch3_fig3_filmstrip.png" alt="Select frames of a radial tour manipulating `aede2`: (1) original projection, (2) full contribution, (3) zero contribution. After zeroing the contribution the animation continues to return to the initial contribution." width="100%"  />
<p class="caption">
Figure 3.3: Select frames of a radial tour manipulating <code>aede2</code>: (1) original projection, (2) full contribution, (3) zero contribution. After zeroing the contribution the animation continues to return to the initial contribution.
</p>
</div>
<!-- Sequence of $\phi_i$ -->
<ol style="list-style-type: decimal">
<li>Set the initial value of <span class="math inline">\(\phi_1\)</span> and <span class="math inline">\(\theta\)</span>: <span class="math inline">\(\phi_1 = \cos^{-1}{\sqrt{A_{k1}^2+A_{k2}^2}}\)</span>, <span class="math inline">\(\theta = \tan^{-1}\frac{A_{k2}}{A_{k1}}\)</span>. Where <span class="math inline">\(\phi_1\)</span> is the angle between <span class="math inline">\(\textbf{e}\)</span> and its shadow in <span class="math inline">\(\textbf{A}\)</span>.</li>
<li>Set an angle increment (<span class="math inline">\(\Delta_\phi\)</span>), the step size between interpolated frames. The package <strong>spinifex</strong> uses an angle increment rather than the number of frames to control the movement to be consistent with the tour algorithm as implemented in <strong>tourr</strong>.</li>
<li>Step towards <span class="math inline">\(0\)</span>, where the manip var is entirely in the projection plane.</li>
<li>Step towards <span class="math inline">\(\pi/2\)</span>, where the manip variable has no contribution to the projection.</li>
<li>Step back to <span class="math inline">\(\phi_1\)</span>.</li>
</ol>
<p>In each of the steps 3-5, a small step may be added to ensure that the endpoints of <span class="math inline">\(\phi\)</span> (<span class="math inline">\(0\)</span>, <span class="math inline">\(\pi/2\)</span>, <span class="math inline">\(\phi_1\)</span>) is reached.</p>
</div>
<div id="sec:display" class="section level4" number="3.1.2.6">
<h4><span class="header-section-number">3.1.2.6</span> Step 5) Projecting the data</h4>
<!-- the reminder of basis operation and now apply data -->
<p>The operation of a manual tour is defined on the projection bases. Only when the presentation is needed, is the data projected through the relevant bases.</p>
<p><span class="math display">\[\begin{align*}
  \textbf{Y}^{(i)}_{[n,~3]} &amp;= \textbf{X}_{[n,~p]} \textbf{M}_{[p,~3]} \textbf{R}^{(i)}_{[3,3]}
\end{align*}\]</span></p>
<!-- plot XY in seq for animation -->
<p>where <span class="math inline">\(\textbf{R}^{(i)}_{[3,3]}\)</span> is the incremental rotation matrix, using <span class="math inline">\(\phi_i\)</span>. To make the data plot, use the first two columns of . Show the projected data for each frame in sequence to form an animation.</p>
<p>Tours are typically viewed as an animation. The animation of this tour can be viewed online on <a href="https://github.com/nspyrison/spinifex_paper/blob/master/paper/gifs/flea_radialtour_mvar5.gif">GitHub</a>.</p>
</div>
</div>
</div>
<div id="sec:oblique" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Oblique cursor movement</h2>
<p>In a move abbreviated way, we can think about the algorithm for 1D and 2D oblique manual tours as:</p>
<!-- 1D Oblique from cursor movement -->
<!-- Best version with \usepackage{algorithm} \usepackage{algpseudocode} -->
<p><img src="figures/ch3_algo1.PNG" width="100%"  style="display: block; margin: auto;" /></p>
<!-- 2D Oblique from cursor movement -->
<p><img src="figures/ch3_algo2.PNG" width="100%"  style="display: block; margin: auto;" /></p>
</div>
<div id="sec:pkgstructure" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Package structure</h2>
<p>In addition to facilitating the manual tour, the other primary function of the <strong>spinifex</strong> package facilitates the layered composition of tours interoperably with tours from <strong>tourr</strong>. This package attempts to abstract the complexity of dealing with a varying number of frames and replicating the length of arguments. We use a layered composition approach to tours similar to <strong>ggplot2</strong> <span class="citation">(<a href="bibliography.html#ref-wickham_ggplot2_2016" role="doc-biblioref">Wickham 2016</a>)</span>. The resulting displays are then animated with <strong>plotly</strong> <span class="citation">(<a href="bibliography.html#ref-sievert_interactive_2020" role="doc-biblioref">Sievert 2020</a>)</span> or <strong>gganimate</strong> <span class="citation">(<a href="bibliography.html#ref-pedersen_gganimate_2020" role="doc-biblioref">Pedersen and Robinson 2020</a>)</span>. This section describes the functions available in the package, their usage, and how to install and get up and running.</p>
<div id="sec:usage" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Usage</h3>
<p>The penguins data <span class="citation">(<a href="bibliography.html#ref-gorman_ecological_2014" role="doc-biblioref">Gorman et al. 2014</a>; <a href="bibliography.html#ref-horst_palmerpenguins_2020" role="doc-biblioref">Horst et al. 2020</a>)</span>, also available in <strong>spinifex</strong> , is used to illustrate the creation of a radial tour, layered composition, and animation. Similar to the flea data, this is exploring the variable contribution that leads to the separation of clusters.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="3-ch-spinifex.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spinifex)</span>
<span id="cb1-2"><a href="3-ch-spinifex.html#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="3-ch-spinifex.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Process penguins data</span></span>
<span id="cb1-4"><a href="3-ch-spinifex.html#cb1-4" aria-hidden="true" tabindex="-1"></a>dat  <span class="ot">&lt;-</span> <span class="fu">scale_sd</span>(penguins_na.rm[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])</span>
<span id="cb1-5"><a href="3-ch-spinifex.html#cb1-5" aria-hidden="true" tabindex="-1"></a>clas <span class="ot">&lt;-</span> penguins_na.rm<span class="sc">$</span>species</span>
<span id="cb1-6"><a href="3-ch-spinifex.html#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="3-ch-spinifex.html#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Start basis and  manual tour path</span></span>
<span id="cb1-8"><a href="3-ch-spinifex.html#cb1-8" aria-hidden="true" tabindex="-1"></a>bas     <span class="ot">&lt;-</span> <span class="fu">basis_olda</span>(<span class="at">data =</span> dat, <span class="at">class =</span> clas)</span>
<span id="cb1-9"><a href="3-ch-spinifex.html#cb1-9" aria-hidden="true" tabindex="-1"></a>mt_path <span class="ot">&lt;-</span> <span class="fu">manual_tour</span>(<span class="at">basis =</span> bas, <span class="at">manip_var =</span> <span class="dv">1</span>, <span class="at">data =</span> dat)</span>
<span id="cb1-10"><a href="3-ch-spinifex.html#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="3-ch-spinifex.html#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Compose the tour display</span></span>
<span id="cb1-12"><a href="3-ch-spinifex.html#cb1-12" aria-hidden="true" tabindex="-1"></a>ggt <span class="ot">&lt;-</span> <span class="fu">ggtour</span>(mt_path, <span class="at">angle =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb1-13"><a href="3-ch-spinifex.html#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">proto_point</span>(<span class="at">aes_args      =</span> <span class="fu">list</span>(<span class="at">color =</span> clas, <span class="at">shape =</span> clas),</span>
<span id="cb1-14"><a href="3-ch-spinifex.html#cb1-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">identity_args =</span> <span class="fu">list</span>(<span class="at">alpa =</span> .<span class="dv">8</span>, <span class="at">size =</span> <span class="fl">1.5</span>)) <span class="sc">+</span></span>
<span id="cb1-15"><a href="3-ch-spinifex.html#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">proto_basis</span>() <span class="sc">+</span></span>
<span id="cb1-16"><a href="3-ch-spinifex.html#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">proto_origin</span>()</span>
<span id="cb1-17"><a href="3-ch-spinifex.html#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="3-ch-spinifex.html#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="do">## Animate</span></span>
<span id="cb1-19"><a href="3-ch-spinifex.html#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">animate_plotly</span>(ggt, <span class="at">fps =</span> <span class="dv">5</span>)</span></code></pre></div>
<p>Composition and animation options are interoperable with <strong>tourr</strong> produced tours. The code below similarly composes a 1D tour from a saveed grand tour path.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="3-ch-spinifex.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">## A grand tour from tourr</span></span>
<span id="cb2-2"><a href="3-ch-spinifex.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tourr)</span>
<span id="cb2-3"><a href="3-ch-spinifex.html#cb2-3" aria-hidden="true" tabindex="-1"></a>gt_path <span class="ot">&lt;-</span> <span class="fu">save_history</span>(<span class="at">data =</span> dat, <span class="at">tour_path =</span> <span class="fu">grand_tour</span>(), <span class="at">max_bases =</span> <span class="dv">10</span>)</span>
<span id="cb2-4"><a href="3-ch-spinifex.html#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="3-ch-spinifex.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Compose 1D tour display</span></span>
<span id="cb2-6"><a href="3-ch-spinifex.html#cb2-6" aria-hidden="true" tabindex="-1"></a>ggt2 <span class="ot">&lt;-</span> <span class="fu">ggtour</span>(gt_path, <span class="at">angle =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb2-7"><a href="3-ch-spinifex.html#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">proto_density</span>(<span class="at">aes_args =</span> <span class="fu">list</span>(<span class="at">color =</span> clas, <span class="at">fill =</span> clas)) <span class="sc">+</span></span>
<span id="cb2-8"><a href="3-ch-spinifex.html#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">proto_basis1d</span>() <span class="sc">+</span></span>
<span id="cb2-9"><a href="3-ch-spinifex.html#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">proto_origin1d</span>()</span>
<span id="cb2-10"><a href="3-ch-spinifex.html#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="3-ch-spinifex.html#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Animate</span></span>
<span id="cb2-12"><a href="3-ch-spinifex.html#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">animate_plotly</span>(ggt2, <span class="at">fps =</span> <span class="dv">5</span>)</span></code></pre></div>
</div>
<div id="functions" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Functions</h3>
<p>Table <a href="3-ch-spinifex.html#tab:functionsTable">3.1</a> lists the primary functions and their purpose. These are grouped into four classes: processing the data, production of tour path, the composition of the tour display, and its animation.</p>
<table class="table" style="font-size: 12px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:functionsTable">Table 3.1: </span>Summary of primary functions.
</caption>
<thead>
<tr>
<th style="text-align:left;">
Family
</th>
<th style="text-align:left;">
Function
</th>
<th style="text-align:left;">
Related to
</th>
<th style="text-align:left;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
processing
</td>
<td style="text-align:left;">
scale_01/sd
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
scale each column to [0,1]/std dev away from the mean
</td>
</tr>
<tr>
<td style="text-align:left;">
processing
</td>
<td style="text-align:left;">
basis_pca/olda/…
</td>
<td style="text-align:left;">
Rdimtools::do.*
</td>
<td style="text-align:left;">
basis of orthogonal component spaces
</td>
</tr>
<tr>
<td style="text-align:left;">
processing
</td>
<td style="text-align:left;">
basis_half_circle
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
basis with uniform contribution across half of a circle
</td>
</tr>
<tr>
<td style="text-align:left;">
processing
</td>
<td style="text-align:left;">
basis_guided
</td>
<td style="text-align:left;">
tourr::guided_tour
</td>
<td style="text-align:left;">
silently return the basis from a guided tour
</td>
</tr>
<tr>
<td style="text-align:left;">
tour path
</td>
<td style="text-align:left;">
manual_tour
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
basis and interpolation information for a manual tour
</td>
</tr>
<tr>
<td style="text-align:left;">
tour path
</td>
<td style="text-align:left;">
save_history
</td>
<td style="text-align:left;">
tourr::save_history
</td>
<td style="text-align:left;">
silent, extended wrapper returning other tour arrays
</td>
</tr>
<tr>
<td style="text-align:left;">
display
</td>
<td style="text-align:left;">
ggtour
</td>
<td style="text-align:left;">
ggplot2::ggplot
</td>
<td style="text-align:left;">
canvas and initialization for a tour animation
</td>
</tr>
<tr>
<td style="text-align:left;">
display
</td>
<td style="text-align:left;">
proto_point/text
</td>
<td style="text-align:left;">
geom_point/text
</td>
<td style="text-align:left;">
adds observation points/text
</td>
</tr>
<tr>
<td style="text-align:left;">
display
</td>
<td style="text-align:left;">
proto_density/2d
</td>
<td style="text-align:left;">
geom_density/2d
</td>
<td style="text-align:left;">
adds density curve/2d contours
</td>
</tr>
<tr>
<td style="text-align:left;">
display
</td>
<td style="text-align:left;">
proto_hex
</td>
<td style="text-align:left;">
geom_hex
</td>
<td style="text-align:left;">
adds hexagonal heatmap of observations
</td>
</tr>
<tr>
<td style="text-align:left;">
display
</td>
<td style="text-align:left;">
proto_basis/1d
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
adds adding basis visual in a unit-circle/-rectangle
</td>
</tr>
<tr>
<td style="text-align:left;">
display
</td>
<td style="text-align:left;">
proto_origin/1d
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
adds reference mark in the center of the data
</td>
</tr>
<tr>
<td style="text-align:left;">
display
</td>
<td style="text-align:left;">
proto_default/1d
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
wrapper for proto_* point + basis + origin
</td>
</tr>
<tr>
<td style="text-align:left;">
display
</td>
<td style="text-align:left;">
facet_wrap_tour
</td>
<td style="text-align:left;">
ggplot2::facet_wrap
</td>
<td style="text-align:left;">
facets on the levels of variable
</td>
</tr>
<tr>
<td style="text-align:left;">
display
</td>
<td style="text-align:left;">
append_fixed_y
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
add/overwrite a fixed vertical position
</td>
</tr>
<tr>
<td style="text-align:left;">
animation
</td>
<td style="text-align:left;">
animate_plotly
</td>
<td style="text-align:left;">
plotly::ggplotly
</td>
<td style="text-align:left;">
render as an interactive hmtl widget
</td>
</tr>
<tr>
<td style="text-align:left;">
animation
</td>
<td style="text-align:left;">
animate_gganimate
</td>
<td style="text-align:left;">
gganimate::animate
</td>
<td style="text-align:left;">
render as a gif, mp4, or other video formats
</td>
</tr>
<tr>
<td style="text-align:left;">
animation
</td>
<td style="text-align:left;">
filmstrip
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
static gpplot faceting on the frames of the animation
</td>
</tr>
</tbody>
</table></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="installation" class="section level3" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Installation</h3>
<p>The <strong>spinifex</strong> is available from CRAN. The following code will help to get up and running:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="3-ch-spinifex.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Installation:</span></span>
<span id="cb3-2"><a href="3-ch-spinifex.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.package</span>(<span class="st">&quot;spinifex&quot;</span>) <span class="do">## Install from CRAN</span></span>
<span id="cb3-3"><a href="3-ch-spinifex.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;spinifex&quot;</span>) <span class="do">## Load into session</span></span>
<span id="cb3-4"><a href="3-ch-spinifex.html#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="3-ch-spinifex.html#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Getting started:</span></span>
<span id="cb3-6"><a href="3-ch-spinifex.html#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Shiny app for visualizing basic application</span></span>
<span id="cb3-7"><a href="3-ch-spinifex.html#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">run_app</span>(<span class="st">&quot;intro&quot;</span>)</span>
<span id="cb3-8"><a href="3-ch-spinifex.html#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="do">## View the code vignette</span></span>
<span id="cb3-9"><a href="3-ch-spinifex.html#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">vignette</span>(<span class="st">&quot;getting_started_with_spinifex&quot;</span>)</span>
<span id="cb3-10"><a href="3-ch-spinifex.html#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="do">## More about proto_* functions</span></span>
<span id="cb3-11"><a href="3-ch-spinifex.html#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="fu">vignette</span>(<span class="st">&quot;ggproto_api&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="sec:usecases" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Use cases</h2>
<!-- Introduction of data and original chapter -->
<p><span class="citation"><a href="bibliography.html#ref-wang_mapping_2018" role="doc-biblioref">Wang et al.</a> (<a href="bibliography.html#ref-wang_mapping_2018" role="doc-biblioref">2018</a>)</span> introduce a new tool, PDFSense, to visualize the sensitivity of hadronic experiments to nucleon structure. The parameter-space of these experiments lies in 56 dimensions, and are approximated as the ten first principal components.</p>
<!-- grand tours on the same data -->
<p><span class="citation"><a href="bibliography.html#ref-cook_dynamical_2018" role="doc-biblioref">Cook et al.</a> (<a href="bibliography.html#ref-cook_dynamical_2018" role="doc-biblioref">2018</a>)</span> illustrate using the grand tour to explore this component reduced space. Tours can better resolve the shape of clusters, intra-cluster detail, and lead to better outlier detection than PDFSense &amp; TFEP (TensorFlow embedded projections) or traditional static embeddings. Building on this, the manual tour examines the sensitivity of a variable’s contribution to the structure in a projection. A basis identified with the grand tour identified in the previous work are used as the initial basis.</p>
<!-- Data structure -->
<p>The data has a hierarchical structure with top-level clusters; DIS, VBP, and jet. Each cluster is a particular class of experiments, each with many experimental datasets (observation points). In consideration of data occlusion, we conduct manual tours on subsets of the DIS and jet clusters. This explores the structure’s sensitivity to each of the variables in turn. The subjectively most and least sensitive variables are illustrated for identifying the clusters’ dimensionality and describing the clusters’ range.</p>
<div id="jet-cluster" class="section level3" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Jet cluster</h3>
<!-- jet cluster, explain dimensionality -->
<p>The jet cluster resides in a smaller dimensionality than the full set of experiments, with four principal components explaining 95% of the variation in the cluster <span class="citation">(<a href="bibliography.html#ref-cook_dynamical_2018" role="doc-biblioref">Cook et al. 2018</a>)</span>. The data within this 4D embedding is a further subset to ATLAS7old and ATLAS7new, focuses on two groups that occupy different parts of the subspace. Radial manual tours controlling contributions from PC4 and PC3 are shown in Figures <a href="3-ch-spinifex.html#fig:ch3fig4">3.4</a> and <a href="3-ch-spinifex.html#fig:ch3fig5">3.5</a>, respectively. The difference in shape can be interpreted as the experiments probing different phase spaces. Back-transforming the principal components to the original variables can be done for a more detailed interpretation.</p>
<!-- discussion of findings and which is more insightful -->
<p>When PC4 is removed from the projection (Figure <a href="3-ch-spinifex.html#fig:ch3fig4">3.4</a>), the difference between the two groups is removed, indicating that PC4 is essential for separating types of experiments. However, eliminating PC3 from the projection (Figure <a href="3-ch-spinifex.html#fig:ch3fig5">3.5</a>) does not affect the structure, meaning PC3 is not essential for distinguishing experiments. Animations varying the contributions of all components can be viewed at the following links: <a href="https://github.com/nspyrison/spinifex_paper/blob/master/paper/gifs/jetcluster_manualtour_pc1.gif">PC1</a>, <a href="https://github.com/nspyrison/spinifex_paper/blob/master/paper/gifs/jetcluster_manualtour_pc2.gif">PC2</a>, <a href="https://github.com/nspyrison/spinifex_paper/blob/master/paper/gifs/jetcluster_manualtour_pc3.gif">PC3</a>, and <a href="https://github.com/nspyrison/spinifex_paper/blob/master/paper/gifs/jetcluster_manualtour_pc4.gif">PC4</a>. It can be seen that only PC4 is vital for viewing the difference in these two experiments.</p>
<!-- JetClusterGood -->
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ch3fig4"></span>
<img src="figures/ch3_fig4_jet_better_pc4.png" alt="Select frames from a radial tour of PC4 within the jet cluster, with color indicating experiment type: ATLAS7new (green) and ATLAS7old (orange). When PC4 is removed from the projection (frame 10), there is little difference between the clusters, suggesting that PC4 is vital for distinguishing the experiments." width="100%"  />
<p class="caption">
Figure 3.4: Select frames from a radial tour of PC4 within the jet cluster, with color indicating experiment type: ATLAS7new (green) and ATLAS7old (orange). When PC4 is removed from the projection (frame 10), there is little difference between the clusters, suggesting that PC4 is vital for distinguishing the experiments.
</p>
</div>
<!-- JetClusterBad -->
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ch3fig5"></span>
<img src="figures/ch3_fig5_jet_worse_pc3.png" alt="Frames from the radial tour manipulating PC3 within the jet cluster, with color indicating experiment type: ATLAS7new (green) and ATLAS7old (orange).  When the contribution from PC3 is changed, there is little change in the separation of the clusters, suggesting that PC3 is not important for distinguishing the experiments." width="100%"  />
<p class="caption">
Figure 3.5: Frames from the radial tour manipulating PC3 within the jet cluster, with color indicating experiment type: ATLAS7new (green) and ATLAS7old (orange). When the contribution from PC3 is changed, there is little change in the separation of the clusters, suggesting that PC3 is not important for distinguishing the experiments.
</p>
</div>
</div>
<div id="dis-cluster" class="section level3" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> DIS cluster</h3>
<!-- introduce DIS cluster -->
<p>Following <span class="citation"><a href="bibliography.html#ref-cook_dynamical_2018" role="doc-biblioref">Cook et al.</a> (<a href="bibliography.html#ref-cook_dynamical_2018" role="doc-biblioref">2018</a>)</span>, PCA is used to explore the DIS cluster, and the first six principal components are used, containing 48% of the full sample variation. The contributions of PC6 and PC2 are explored in Figures <a href="3-ch-spinifex.html#fig:ch3fig6">3.6</a> and <a href="3-ch-spinifex.html#fig:ch3fig7">3.7</a>, respectively. Three experiments are examined: DIS HERA1+2 (green), dimuon SIDIS (purple), and charm SIDIS (orange).</p>
<!-- comparison of the DIS cluster -->
<p>Both PC2 and PC6 contribute to the projection similarly. When PC6 is rotated into the projection, variation in the DIS HERA1+2 is greatly reduced. When PC2 is removed from the projection, dimuon SIDIS becomes more distinct. Even though both variables contribute similarly to the original projection, their contributions have quite different effects on the structure of each cluster and the distinction between clusters. Animations of all of the principal components can be viewed from the links: <a href="https://github.com/nspyrison/spinifex_paper/blob/master/paper/gifs/discluster_manualtour_pc1.gif">PC1</a>, <a href="https://github.com/nspyrison/spinifex_paper/blob/master/paper/gifs/discluster_manualtour_pc2.gif">PC2</a>, <a href="https://github.com/nspyrison/spinifex_paper/blob/master/paper/gifs/discluster_manualtour_pc3.gif">PC3</a>, <a href="https://github.com/nspyrison/spinifex_paper/blob/master/paper/gifs/discluster_manualtour_pc4.gif">PC4</a>, <a href="https://github.com/nspyrison/spinifex_paper/blob/master/paper/gifs/discluster_manualtour_pc5.gif">PC5</a>, and <a href="https://github.com/nspyrison/spinifex_paper/blob/master/paper/gifs/discluster_manualtour_pc6.gif">PC6</a>.</p>
<!-- DISclusterGood -->
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ch3fig6"></span>
<img src="figures/ch3_fig6_DIS_better_pc6.png" alt="Select frames from a radial tour exploring the sensitivity that PC6 has on the structure of the DIS cluster, with color indicating experiment type: DIS HERA1+2 (green), dimuon SIDIS (purple), and charm SIDIS (orange). DIS HERA1+2 is distributed in a cross-shaped plane, and charm SIDIS occupies the center of this cross, and dimuon SIDIS is a linear cluster crossing DIS HERA1+2. As the contribution of PC6 is increased, DIS HERA1+2 becomes almost singular in one direction (frame 5), indicating that this cluster has minimal variability in the direction of PC6." width="100%"  />
<p class="caption">
Figure 3.6: Select frames from a radial tour exploring the sensitivity that PC6 has on the structure of the DIS cluster, with color indicating experiment type: DIS HERA1+2 (green), dimuon SIDIS (purple), and charm SIDIS (orange). DIS HERA1+2 is distributed in a cross-shaped plane, and charm SIDIS occupies the center of this cross, and dimuon SIDIS is a linear cluster crossing DIS HERA1+2. As the contribution of PC6 is increased, DIS HERA1+2 becomes almost singular in one direction (frame 5), indicating that this cluster has minimal variability in the direction of PC6.
</p>
</div>
<!-- DISclusterBad -->
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ch3fig7"></span>
<img src="figures/ch3_fig7_DIS_worse_pc2.png" alt="Frames from the radial tour exploring the sensitivity PC2 to the structure of the DIS cluster, with color indicating experiment type: DIS HERA1+2 (green), dimuon SIDIS (purple), and charm SIDIS (orange). As the contribution of PC2 is decreased, dimuon SIDIS becomes more distinguishable from the other two clusters, indicating that the absence of PC2 is vital for separating this cluster from the others." width="100%"  />
<p class="caption">
Figure 3.7: Frames from the radial tour exploring the sensitivity PC2 to the structure of the DIS cluster, with color indicating experiment type: DIS HERA1+2 (green), dimuon SIDIS (purple), and charm SIDIS (orange). As the contribution of PC2 is decreased, dimuon SIDIS becomes more distinguishable from the other two clusters, indicating that the absence of PC2 is vital for separating this cluster from the others.
</p>
</div>
</div>
</div>
<div id="sec:discussion" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Discussion</h2>
<!-- Summary of spinifex -->
<p>Dynamic linear projections of quantitative multivariate data, tours, play an essential role in data visualization; they extend the dimensionality of visuals to peek into high-dimensional data and parameter spaces. This research has taken the manual tour algorithm, specifically the radial rotation, used in GGobi <span class="citation">(<a href="bibliography.html#ref-swayne_ggobi:_2003" role="doc-biblioref">Swayne et al. 2003</a>)</span> to interactively rotate a variable into or out of a 2D projection and modified it to create an animation that performs the same task. It is most helpful in examining the importance of variables and how the structure in the projection is sensitive or not to specific variables. This functionality is made available in the package <strong>spinifex</strong>. Which also extends the geometric display and export formats interoperable with the <strong>tourr</strong> package.</p>
<!-- Summary of application -->
<p>The original conception of the grand tour was motivated by problems in physics <span class="citation">(<a href="bibliography.html#ref-asimov_grand_1985" role="doc-biblioref">Asimov 1985</a>)</span> Thus, the use case was fitting. The radial tour was used to explore the sensitivity of variable contributions to the separation of different experiments in high-energy particle physics. These tools can be applied quite broadly to many multivariate data analysis problems.</p>
<!-- Constraints -->
<p>The manual tour is constrained because the effect of one variable depends on the contributions of other variables in the manip space. However, this can simplify a projection by removing variables without affecting the visible structure. Defining a manual rotation in high dimensions is possible using Givens rotations and Householder reflections as outlined in <span class="citation"><a href="bibliography.html#ref-buja_computational_2005" role="doc-biblioref">Buja et al.</a> (<a href="bibliography.html#ref-buja_computational_2005" role="doc-biblioref">2005</a>)</span>. This would provide more flexible manual rotation but more difficult for a user because they have the choice (too much choice) of which directions to move.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="2-ch-background.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="4-ch-userstudy.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
